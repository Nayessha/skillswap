generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  password  String
  bio       String?
  createdAt DateTime @default(now())
  skills Skill[]
  requests Request[]
  ratingsGiven     Rating[] @relation("Reviewer")
  ratingsReceived  Rating[] @relation("RatedUser")
  messagesSent Message[] @relation("UserMessages")
  wantedSkills WantedSkill[]

}
model Skill {
  id        Int      @id @default(autoincrement())
  title     String
  category  String?
  userId    Int
  user      User     @relation(fields: [userId], references: [id])
  createdAt DateTime @default(now())
  requests Request[]

}
model Request {
  id          Int      @id @default(autoincrement())
  skillId     Int
  requesterId Int
  status      String   @default("pending")
  createdAt   DateTime @default(now())

  skill       Skill    @relation(fields: [skillId], references: [id])
  requester   User     @relation(fields: [requesterId], references: [id])
  messages Message[]
}
model Rating {
  id         Int      @id @default(autoincrement())
  value      Int

  reviewer   User     @relation("Reviewer", fields: [reviewerId], references: [id])
  reviewerId Int

  user       User     @relation("RatedUser", fields: [userId], references: [id])
  userId     Int

  createdAt  DateTime @default(now())
}
model Message {
  id        Int      @id @default(autoincrement())
  content   String

  sender     User    @relation("UserMessages", fields: [senderId], references: [id])
  senderId   Int

  request    Request @relation(fields: [requestId], references: [id])
  requestId  Int

  createdAt DateTime @default(now())
}
model WantedSkill {
  id        Int     @id @default(autoincrement())
  title     String
  category  String

  user      User    @relation(fields: [userId], references: [id])
  userId    Int

  createdAt DateTime @default(now())
}